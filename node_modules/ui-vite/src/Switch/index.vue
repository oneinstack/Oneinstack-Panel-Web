<template>
    <div class="v-switch-container" @click="$emit('update:value', !value)" ref="switchRef">
        <div
            class="v-switch-circle"
            :style="{ background: `${value ? conf.theme[theme].bgColor[0] : conf.theme[theme].bgColor[1]}` }"
        >
            <span v-show="value" style="left: 5px">{{ onLabel }}</span>
            <span v-show="!value" style="right: 5px">{{ offLabel }}</span>
            <span
                class="v-switch-btn"
                :style="{
                    transform: `translateX(${value ? conf.width - 18 - 5 : '3'}px)`,
                    background: `${value ? conf.theme[theme].btnColor[0] : conf.theme[theme].btnColor[1]}`
                }"
            ></span>
        </div>
    </div>
</template>

<script lang="ts" setup>
import { onMounted, reactive, ref } from 'vue'
const props = defineProps({
    theme: { default: 'default' },
    value: { default: false },
    offLabel: { default: '' },
    onLabel: { default: '' }
})
const emit = defineEmits(['update:value'])
const switchRef = ref<HTMLDivElement>({} as any)
const conf = reactive({
    width: 0,
    theme: {
        default: {
            bgColor: ['#FF7C43', '#A57E71'],
            btnColor: ['#FFFFFF', '#FFFFFF']
        }
    } as any
})

onMounted(() => {
    conf.width = switchRef.value.clientWidth
})
</script>
<style lang="less" scoped></style>

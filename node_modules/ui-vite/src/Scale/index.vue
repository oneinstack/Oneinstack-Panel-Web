<template>
    <div class="v-scale-box">
        <div class="v-scale-container" :style="{ top: `${conf.top}px`, left: `${conf.left}px` }">
            <div class="v-scale-content" :style="{ transform: conf.transform }">
                <slot />
            </div>
        </div>
    </div>
</template>

<script lang="ts" setup>
import { reactive, onMounted, onUnmounted } from 'vue'

const conf = reactive({
    transform: 'scale(1)',
    top: 0,
    left: 0
})

const autoSize = () => {
    const w = document.body.scrollWidth
    const h = document.body.scrollHeight

    const sw = w / 1920
    const sh = h / 1080

    let res = 1
    res = sw < sh ? sw : sh

    const resW = 1920 * res
    const resH = 1080 * res

    conf.top = (h - resH) / 2

    conf.left = (w - resW) / 2

    conf.transform = 'scale(' + res.toFixed(4) + ')'
}

onMounted(() => {
    autoSize()
    window.addEventListener('resize', autoSize)
})

onUnmounted(() => {
    window.removeEventListener('resize', autoSize)
})
</script>

import{_ as a,a as r}from"./custom-form.vue_vue_type_script_setup_true_lang-C6_HscmN.js";import{_ as e}from"./custom-table.vue_vue_type_script_setup_true_lang-DrKOEP8-.js";/* empty css             */import{E as s}from"./el-button-CghqIf1m.js";import{d as t,x as o,c as i,a1 as l,al as p,b as n,o as d,X as c,a3 as m,i as u,Z as w,e as y,ab as g,am as j,F as b,$ as f,h as _,ah as v,ai as k,aj as C,ae as h}from"./index-BpgbG9_h.js";import{A as x}from"./Api-DIELJlCh.js";import{_ as q}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./el-drawer-_L3C1oIg.js";import"./index-E4qH6n_1.js";import"./vnode-CjD2MH5P.js";import"./index-vgTml2Xy.js";import"./scroll-BAvMHt_N.js";import"./index-Cee523Ml.js";import"./el-overlay-ghEGIsKl.js";import"./el-form-item-CGp8wt0Y.js";import"./castArray-rxr1KqzA.js";import"./_Uint8Array-CjQH01s2.js";import"./_initCloneObject-Dm3var8j.js";import"./custom-dialog-BYISrEhD.js";import"./el-dialog-DDfsOjX0.js";import"./index-BLMo0UPX.js";import"./refs-D38PEvv-.js";import"./file-panel-ClhRzc_o.js";/* empty css                   */import"./el-checkbox-DBaZw9db.js";import"./isEqual-DSpmu0jQ.js";import"./el-select-DASP7Wfd.js";import"./el-popper-DuiXp9eT.js";import"./index-B5k-8-YQ.js";import"./el-tag-hrDeqNMc.js";import"./index-DZi90au_.js";/* empty css                          *//* empty css                 */import"./el-pagination-jkW4z2yl.js";import"./el-table-column-CmDaQHVS.js";import"./el-tooltip-l0sNRNKZ.js";const D={class:"database-container"},A={class:"container"},E={class:"tool-bar"},F={class:"btn-group"},O={class:"box2"},V={class:"drawerHeader"},X={style:{"margin-top":"40px"}},Z={class:"flex items-center",style:{gap:"8px"}},$=q(t({__name:"remote",setup(t){const q=o({themeColor:{light:["#F7911C"],dark:["#EAB170"]},list:{loading:!0,data:[],params:{type:"mysql"},columns:[{prop:"addr",label:"数据库地址"},{prop:"port",label:"端口"},{prop:"root",label:"用户名"},{prop:"password",label:"密码"},{prop:"remark",label:"备注"},{prop:"action",label:"操作"}],getData:async()=>{q.list.loading=!0;const{data:a}=await x.getConnlist(q.list.params);q.list.loading=!1,q.list.data=a},syncData:async a=>{await x.syncDatabaseConn({id:a}),l.success("同步成功！")}},password:{show:{},copy:async a=>{await navigator.clipboard.writeText(a),l.success("复制成功！")}},drawer:{show:!1,title:"添加数据库",type:"add",loading:!1,open:(a,r)=>{if(q.drawer.title="添加数据库","edit"===a){q.drawer.title="编辑数据库";const a=structuredClone(p(r));q.form.data.value=a}q.drawer.type=a,q.drawer.show=!0},onClose:()=>{var a,r;null==(a=q.form.instance)||a.clearValidate(),null==(r=q.form.instance)||r.resetFields(),q.drawer.show=!1},onConfirm:()=>{var a;null==(a=q.form.instance)||a.validate((async a=>{if(!a)return;q.drawer.loading=!0;const r="add"===q.drawer.type?x.addDatabaseConn:x.updateDatabaseConn;await r(q.form.data.value),q.drawer.loading=!1,l.success("add"===q.drawer.type?"添加成功！":"编辑成功！"),q.list.getData(),q.drawer.show=!1}))}},form:{instance:null,data:{value:{type:"mysql"},items:i((()=>"mysql"===q.list.params.type?[{label:"数据库地址",prop:"addr",type:"input",rules:[{required:!0,message:"请输入数据库地址",trigger:"blur"}]},{label:"端口",prop:"port",type:"input",rules:[{required:!0,message:"请输入端口",trigger:"blur"}]},{label:"用户名",prop:"root",type:"input",rules:[{required:!0,message:"请输入用户名",trigger:"blur"}]},{label:"密码",prop:"password",type:"password",rules:[{required:!0,message:"请输入密码",trigger:"blur"}]},{label:"备注",prop:"remark",type:"textarea"}]:[]))}}});return q.list.getData(),(t,o)=>{const i=s,l=b,p=e,x=a,$=r;return d(),n("div",D,[c("div",A,[c("div",E,[c("div",F,[m(i,{type:"primary",onClick:o[0]||(o[0]=a=>q.drawer.open("add"))},{default:u((()=>o[3]||(o[3]=[w("添加远程服务器")]))),_:1})])]),c("div",O,[c("div",V,[c("div",{class:"back",onClick:o[1]||(o[1]=a=>y(g).router.back())},[m(l,null,{default:u((()=>[m(y(j))])),_:1}),o[4]||(o[4]=c("span",null,"返回",-1))]),o[5]||(o[5]=c("span",{class:"title"},"远程服务器",-1))]),m(p,{loading:q.list.loading,data:q.list.data,columns:q.list.columns},{empty:u((()=>[c("div",X,[c("span",null,[o[6]||(o[6]=w(" 您的远程服务器列表为空，您可以 ")),c("a",{class:"cursor-pointer",style:{color:"var(--el-color-primary)","text-decoration":"underline"},onClick:o[2]||(o[2]=a=>q.drawer.open("add"))}," 添加一个远程服务器 ")])])])),password:u((({row:a,index:r})=>[c("div",Z,[c("span",null,f(q.password.show[r]?a.password:"".padEnd(a.password.length,"*")),1),m(l,{class:"hover-opacity cursor-pointer",size:18,onClick:a=>q.password.show[r]=!q.password.show[r]},{default:u((()=>[q.password.show[r]?(d(),_(y(v),{key:0})):(d(),_(y(k),{key:1}))])),_:2},1032,["onClick"]),m(l,{class:"hover-opacity cursor-pointer",onClick:r=>q.password.copy(a.password)},{default:u((()=>[m(y(C))])),_:2},1032,["onClick"])])])),action:u((({row:a})=>[m(i,{type:"primary",link:"",onClick:r=>q.drawer.open("edit",a)},{default:u((()=>o[7]||(o[7]=[w("编辑")]))),_:2},1032,["onClick"]),m(i,{type:"primary",link:"",onClick:r=>q.list.syncData(a.id)},{default:u((()=>o[8]||(o[8]=[w("同步")]))),_:2},1032,["onClick"])])),_:1},8,["loading","data","columns"])])]),m($,{visible:q.drawer.show,title:q.drawer.title,loading:q.drawer.loading,"on-close":q.drawer.onClose,"on-confirm":q.drawer.onConfirm},{default:u((()=>["add"===q.drawer.type||"edit"===q.drawer.type?(d(),_(x,{key:0,data:q.form.data,"on-init":a=>q.form.instance=a},null,8,["data","on-init"])):h("",!0)])),_:1},8,["visible","title","loading","on-close","on-confirm"])])}}}),[["__scopeId","data-v-45a04fa2"]]);export{$ as default};

import{_ as a}from"./custom-table.vue_vue_type_script_setup_true_lang-Sl4-m6yg.js";/* empty css             */import{E as s,a as t}from"./el-tab-pane-CjotcpYj.js";import{a as e,E as o}from"./el-select-Diq8nzxA.js";import"./el-popper-CgqLQvxz.js";import{E as l}from"./el-space-D4lKLniW.js";import{E as i}from"./el-button-C6SlJWJv.js";import{_ as r}from"./empty-Ckx_bKPU.js";import{A as p}from"./Api-BE344Hwh.js";import{d as n,x as m,b as d,o as u,X as c,a3 as g,i as b,e as _,ab as j,Z as f,ak as v,F as y,J as x,a5 as h,h as k,m as C,ae as L}from"./index-B0-DY18Y.js";import{_ as D}from"./_plugin-vue_export-helper-BCo6x5W8.js";/* empty css                   */import"./el-pagination-BAvsU8LK.js";import"./isEqual-C6HWhcNO.js";import"./_Uint8Array-D0RYPAnJ.js";import"./el-input-CCiT4Pw-.js";import"./el-table-column-DufQ25bx.js";import"./_initCloneObject-B_s4quhu.js";import"./el-checkbox-DQDwETtM.js";import"./el-tooltip-l0sNRNKZ.js";import"./vnode-C-JGoUos.js";import"./castArray-DHQk_f1a.js";import"./index-DSCusJxK.js";const U={class:"container"},V={class:"tool-bar"},z={class:"demo-form-inline flex",style:{gap:"16px"}},E={class:"flex items-center",style:{color:"var(--el-color-primary)",gap:"8px"}},A={class:"box2"},O=D(n({__name:"redis",props:{conf:{}},setup(n){const D=m({...n.conf,server:{options:[],getOptions:async()=>{const{data:a}=await p.getConnlist(D.list.params);D.server.options=a.map((a=>({label:a.remark?`${a.remark}(${a.addr})`:a.addr,value:a.id})))},onChange:a=>{D.list.params.id=a,D.dbList.params.id=a,D.dbList.getData(),O({paneName:D.dbList.data[0]})}},dbList:{params:{page:1,pageSize:999,id:0,type:"redis"},data:[],getData:async()=>{const{data:a}=await p.getDatabaseList(D.list.params);D.dbList.data=a.data}}});D.list.loading=!1,!D.server.options.length&&D.server.getOptions();const O=({paneName:a})=>{D.list.params.r_db=a,D.list.getData()};return(p,n)=>{const m=i,w=l,N=y,$=e,S=o,X=s,Z=t,q=a;return u(),d("div",U,[c("div",V,[g(w,{class:"btn-group"},{default:b((()=>[g(m,{type:"primary",onClick:n[0]||(n[0]=a=>_(j).router.push("/database/remote"))},{default:b((()=>n[4]||(n[4]=[f("远程服务器")]))),_:1})])),_:1}),c("div",z,[c("span",E,[g(N,{size:18},{default:b((()=>[g(_(v))])),_:1}),n[5]||(n[5]=f(" 当前所有操作都关联至 "))]),g(S,{modelValue:D.list.params.id,"onUpdate:modelValue":n[1]||(n[1]=a=>D.list.params.id=a),placeholder:"请选择一个服务器",style:{width:"200px"},"no-data-text":"暂无数据",onChange:D.server.onChange},{default:b((()=>[(u(!0),d(x,null,h(D.server.options,(a=>(u(),k($,C({ref_for:!0},a),null,16)))),256))])),_:1},8,["modelValue","onChange"])])]),c("div",A,[D.dbList.data.length?(u(),k(Z,{key:0,modelValue:D.list.params.r_db,"onUpdate:modelValue":n[2]||(n[2]=a=>D.list.params.r_db=a),onTabClick:O},{default:b((()=>[(u(!0),d(x,null,h(D.dbList.data,(a=>(u(),k(X,{key:a.index,label:`DB${a.name}`,name:a.name},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])):L("",!0),g(q,{page:D.list.params.page,"onUpdate:page":[n[3]||(n[3]=a=>D.list.params.page=a),D.list.getData],loading:D.list.loading,data:D.list.data,"auto-pagination":!1,total:D.list.total,"page-size":D.list.params.pageSize,columns:D.list.columns},{empty:b((()=>n[6]||(n[6]=[c("div",{class:"no-data"},[c("img",{src:r,alt:""}),c("span",null,"暂无数据")],-1)]))),_:1},8,["page","loading","data","total","page-size","columns","onUpdate:page"])])])}}}),[["__scopeId","data-v-76d5b9be"]]);export{O as default};

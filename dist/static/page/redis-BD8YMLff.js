import{_ as a}from"./custom-table.vue_vue_type_script_setup_true_lang-DrKOEP8-.js";/* empty css             */import{E as s,a as t}from"./el-tab-pane-CMowB2YY.js";import"./el-tag-hrDeqNMc.js";import{a as e,E as o}from"./el-select-DASP7Wfd.js";import"./el-popper-DuiXp9eT.js";import{E as i}from"./el-space-DYaOROx8.js";import{E as l}from"./el-button-CghqIf1m.js";import{_ as r}from"./empty-Ckx_bKPU.js";import{A as p}from"./Api-DIELJlCh.js";import{d as n,x as m,b as d,o as c,X as g,a3 as u,i as b,e as j,ab as _,Z as f,ak as v,F as x,J as y,a5 as h,h as k,m as C,ae as L}from"./index-BpgbG9_h.js";import{_ as V}from"./_plugin-vue_export-helper-BCo6x5W8.js";/* empty css                   */import"./el-pagination-jkW4z2yl.js";import"./isEqual-DSpmu0jQ.js";import"./_Uint8Array-CjQH01s2.js";import"./index-vgTml2Xy.js";import"./index-B5k-8-YQ.js";/* empty css                 */import"./el-table-column-CmDaQHVS.js";import"./_initCloneObject-Dm3var8j.js";import"./el-checkbox-DBaZw9db.js";import"./el-tooltip-l0sNRNKZ.js";import"./vnode-CjD2MH5P.js";import"./castArray-rxr1KqzA.js";import"./scroll-BAvMHt_N.js";import"./index-Cee523Ml.js";const D={class:"container"},z={class:"tool-bar"},E={class:"demo-form-inline flex",style:{gap:"16px"}},U={class:"flex items-center",style:{color:"var(--el-color-primary)",gap:"8px"}},A={class:"box2"},O=V(n({__name:"redis",props:{conf:{}},setup(n){const V=m({...n.conf,server:{options:[],getOptions:async()=>{const{data:a}=await p.getConnlist(V.list.params);V.server.options=a.map((a=>({label:a.remark?`${a.remark}(${a.addr})`:a.addr,value:a.id})))},onChange:a=>{V.list.params.id=a,V.dbList.params.id=a,V.dbList.getData(),O({paneName:V.dbList.data[0]})}},dbList:{params:{page:1,pageSize:999,id:0,type:"redis"},data:[],getData:async()=>{const{data:a}=await p.getDatabaseList(V.list.params);V.dbList.data=a.data}}});V.list.loading=!1,!V.server.options.length&&V.server.getOptions();const O=({paneName:a})=>{V.list.params.r_db=a,V.list.getData()};return(p,n)=>{const m=l,w=i,N=x,$=e,q=o,S=s,X=t,Z=a;return c(),d("div",D,[g("div",z,[u(w,{class:"btn-group"},{default:b((()=>[u(m,{type:"primary",onClick:n[0]||(n[0]=a=>j(_).router.push("/database/remote"))},{default:b((()=>n[4]||(n[4]=[f("远程服务器")]))),_:1})])),_:1}),g("div",E,[g("span",U,[u(N,{size:18},{default:b((()=>[u(j(v))])),_:1}),n[5]||(n[5]=f(" 当前所有操作都关联至 "))]),u(q,{modelValue:V.list.params.id,"onUpdate:modelValue":n[1]||(n[1]=a=>V.list.params.id=a),placeholder:"请选择一个服务器",style:{width:"200px"},"no-data-text":"暂无数据",onChange:V.server.onChange},{default:b((()=>[(c(!0),d(y,null,h(V.server.options,(a=>(c(),k($,C({ref_for:!0},a),null,16)))),256))])),_:1},8,["modelValue","onChange"])])]),g("div",A,[V.dbList.data.length?(c(),k(X,{key:0,modelValue:V.list.params.r_db,"onUpdate:modelValue":n[2]||(n[2]=a=>V.list.params.r_db=a),onTabClick:O},{default:b((()=>[(c(!0),d(y,null,h(V.dbList.data,(a=>(c(),k(S,{key:a.index,label:`DB${a.name}`,name:a.name},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])):L("",!0),u(Z,{page:V.list.params.page,"onUpdate:page":[n[3]||(n[3]=a=>V.list.params.page=a),V.list.getData],loading:V.list.loading,data:V.list.data,"auto-pagination":!1,total:V.list.total,"page-size":V.list.params.pageSize,columns:V.list.columns},{empty:b((()=>n[6]||(n[6]=[g("div",{class:"no-data"},[g("img",{src:r,alt:""}),g("span",null,"暂无数据")],-1)]))),_:1},8,["page","loading","data","total","page-size","columns","onUpdate:page"])])])}}}),[["__scopeId","data-v-76d5b9be"]]);export{O as default};
